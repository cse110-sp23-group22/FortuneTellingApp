<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: TarotCardDisplay/TarotDisplay.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: TarotCardDisplay/TarotDisplay.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const cardElements = document.querySelectorAll(".card");
const cardImages = document.getElementsByTagName("img");

window.addEventListener("DOMContentLoaded", init);

let dataOne, dataTwo, dataThree;

/**
 * @module TarotDisplay
 * @description Fetches the Tarot Card Answer.
 * Returns 0 if error, 1 if successfully load tarot card descriptions.
 * Appends image corresponding to the selected tarot card.
 * @returns int
 * @throws Fetch API failure errors
 * @tutorial Tarot
 * @author Chris, Eric, Jessica
 */
async function init() {
  try {
    //fetch the horoscope json file and convert to an array
    //containing the responses
    //TODO: Fix this with local storage
    let type = localStorage.getItem("readingType");
    let tarotData = await fetch("./TarotCardAnswer.JSON");
    tarotData = await tarotData.json();
    let tempNum = Math.floor(Math.random() * tarotData[type].length);
    dataOne = tarotData[type][tempNum];
    let secondNum = Math.floor(Math.random() * tarotData[type].length);
    while (secondNum == tempNum)
      secondNum = Math.floor(Math.random() * tarotData[type].length);
    dataTwo = tarotData[type][secondNum];
    let thirdNum = Math.floor(Math.random() * tarotData[type].length);
    while ((thirdNum == tempNum) | (thirdNum == secondNum))
      thirdNum = Math.floor(Math.random() * tarotData[type].length);
    dataThree = tarotData[type][thirdNum];

    //Set Card Images (Target: 1,3,5)
    cardImages[1].src = `../Assets/TarotCardGraphics/${dataOne["TarotCard"]}.png`;
    cardImages[3].src = `../Assets/TarotCardGraphics/${dataTwo["TarotCard"]}.png`;
    cardImages[5].src = `../Assets/TarotCardGraphics/${dataThree["TarotCard"]}.png`;
    //exit code
    return 1;
  } catch (error) {
    console.error(error);
    return 0;
  }
}

let homeButton = document.getElementById("homeButton");
homeButton.addEventListener("click", goHome);

/**
 * @function
 * @description Exits back to main
 * @author Chris, Eric, Jessica
 */
function goHome() {
  window.location.href = "../../index.html";
}

/**
 * @function
 * @description Reveals Card by flipping the tarot card image and displaying meaning on the bottom row.
 * @author Chris, Eric, Jessica
 */
function revealCard(cardIndex) {
  const card = cardElements[cardIndex];
  // Unflipping the rest
  // cardElements.forEach((prevCard) => {
  //   if (prevCard.classList.contains("flipped")) {
  //     prevCard.classList.toggle("flipped");
  //   }
  // });
  if (card.classList.contains("flipped")) return;
  card.classList.toggle("flipped");

  // Setting data
  const cardTitle = document.getElementsByTagName("h2")[0];
  let data;
  var audio = new Audio("/source/Assets/woosh.mp3");
  switch (cardIndex) {
    case 0:
      audio.play();
      data = dataOne["Explanation"];
      cardTitle.textContent = dataOne["TarotCard"];
      cardElements[0].addEventListener("mouseover", () => {
        cardMeaning.style.display = "block";
        cardTitle.textContent = dataOne["TarotCard"];
        meaningText.innerText = dataOne["Explanation"];
      });
      break;
    case 1:
      audio.play();
      data = dataTwo["Explanation"];
      cardTitle.textContent = dataTwo["TarotCard"];
      cardElements[1].addEventListener("mouseover", () => {
        cardMeaning.style.display = "block";
        cardTitle.textContent = dataTwo["TarotCard"];
        meaningText.innerText = dataTwo["Explanation"];
      });
      break;
    case 2:
      audio.play();
      data = dataThree["Explanation"];
      cardTitle.textContent = dataThree["TarotCard"];
      cardElements[2].addEventListener("mouseover", () => {
        cardMeaning.style.display = "block";
        cardTitle.textContent = dataThree["TarotCard"];
        meaningText.innerText = dataThree["Explanation"];
      });
      break;
    default:
      console.error("This card Index does not currently exist yet!");
  }

  const cardMeaning = document.getElementById("cardMeaning");
  const meaningText = document.getElementById("meaningText");

  if (card.classList.contains("flipped")) {
    cardMeaning.style.display = "block";
    meaningText.innerText = data;
  }

  // else {
  //   cardMeaning.style.display = "none";
  //   meaningText.innerText = "";
  // }

  // cardElements[0].addEventListener('mouseout', () => {
  //   cardMeaning.style.display = 'none';
  // });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Horoscope.html">Horoscope</a></li><li><a href="module-Questionnaire.html">Questionnaire</a></li><li><a href="module-TarotCardForm.html">TarotCardForm</a></li><li><a href="module-TarotDisplay.html">TarotDisplay</a></li></ul><h3>Classes</h3><ul><li><a href="TransitionCanvas.html">TransitionCanvas</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-Horoscope.html">Horoscope Module</a></li><li><a href="tutorial-JSDocs.html">Starting JSDocs</a></li><li><a href="tutorial-Questionaire.html">Questionaire Module</a></li><li><a href="tutorial-Tarot.html">TarotDisplay Module</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Jun 09 2023 23:16:06 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
