<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: HoroscopeDisplay/horoscope.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="",baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="44ExYb8hbDgSpUzDFTgri"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Horoscope.html">Horoscope</a></div><div class="sidebar-section-children"><a href="Horoscope.html">Horoscope</a></div><div class="sidebar-section-children"><a href="Questionaire.html">Questionaire</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="CZGolLka-tmj_snDuQnw-"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#adjustIndexForHorroscope">adjustIndexForHorroscope</a></div><div class="sidebar-section-children"><a href="global.html#concentricGradient">concentricGradient</a></div><div class="sidebar-section-children"><a href="global.html#goHome">goHome</a></div><div class="sidebar-section-children"><a href="global.html#initNameBirth">initNameBirth</a></div><div class="sidebar-section-children"><a href="global.html#outputHoroscope">outputHoroscope</a></div><div class="sidebar-section-children"><a href="global.html#parseNumbers">parseNumbers</a></div><div class="sidebar-section-children"><a href="global.html#pulseRedOverlay">pulseRedOverlay</a></div><div class="sidebar-section-children"><a href="global.html#shake">shake</a></div><div class="sidebar-section-children"><a href="global.html#showContent">showContent</a></div><div class="sidebar-section-children"><a href="global.html#timer">timer</a></div><div class="sidebar-section-children"><a href="global.html#TransitionCanvas">TransitionCanvas</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">HoroscopeDisplay_horoscope.js</h1></header><article><pre class="prettyprint source lang-js"><code>var birthday; //birthday input, got from local storage
var horoscopeArray; //array including the horoscope responses
var homeButton; //button used to go back to the home page

//init function on load of the page
window.addEventListener("load", init);

/**
 * @description init function used to fetch horoscope.json file and set up the home page
 * event listener behavior. Exit code 1 if successful, 0 if not.
 * @tutorial horoscope-tutorial
 * @class Horoscope
 * @author Nikan, Bill, Jennifer
 * @throws Fetch API failure errors
 */
async function init() {
  try {
    //fetch the horoscope json file and convert to an array
    //containing the responses
    horoscopeArray = await fetch("./horoscope.JSON");
    horoscopeArray = await horoscopeArray.json();
    horoscopeArray = horoscopeArray["data"];

    //get homeButton and set up event listener
    homeButton = document.getElementById("homeButton");
    homeButton.addEventListener("click", goHome);

    //Run Timer
    timer();
    //output the horoscope based on the birthday of the user
    outputHoroscope();
    //exit code
    return 1;
  } catch (error) {
    //catch errors with exit code 0
    console.error(error);
    return 0;
  }
}

/**
 * Timer Event -> ! This function Triggers ALL TIME BASED EVENTS
 */
async function timer() {
  //TODO: Start the ticking event (SOUND)
  concentricGradient();
  //After 10 seconds start blood red screen
  await new Promise((resolve) => setTimeout(resolve, 10000));
  pulseRedOverlay(1000);
  //Start shaking after 10 seconds
  await new Promise((resolve) => setTimeout(resolve, 10000));
  shake(1, 1);
}

/**
 * Shake Element shakes the body by translating X and rotating
 * @param {integer} shakeXAmount
 * @param {integer} RotateAmount
 * Both of these parameters determine the resulting shake look
 */
function shake(shakeXAmount, RotateAmount) {
  let body = document.getElementsByClassName("page-group")[0];
  body.classList.toggle("shakeElement");
  let shakeEle = document.getElementsByClassName("shakeElement")[0];
  let shakeAmount = shakeXAmount;
  let shakeRotate = RotateAmount;
  let shakeInterval = setInterval(() => {
    shakeEle.style.setProperty("--shakeAmount", `${shakeAmount}px`);
    shakeEle.style.setProperty("--shakeRotate", `${shakeRotate}deg`);
    shakeAmount++;
    //shakeRotate++;
  }, 1000);
}

/**
 * Slowly fades in closer and closer
 */
function concentricGradient() {
  let gradient = document.getElementById("gradient");
  let size = 2000;
  let floor = 500;
  let gradientInterval = setInterval(() => {
    gradient.style.background = `radial-gradient(${size}px,transparent, #000000)`;
    size -= 10;
    if (size &lt; floor) size = floor;
  }, 100);
}

/**
 * Pulses the overlay div. This is supposed to be a blood screen
 * @param {integer} transitionTime
 * How long does the transition take. Also determines time between each pulse
 */
function pulseRedOverlay(transitionTime) {
  let overlay = document.getElementsByClassName("overlay")[0];
  let delay = transitionTime;
  let redColor = 255; //255 is the greatest saturation of red
  let interval = setInterval(() => {
    overlay.style.transition = `opacity ${delay / 1000}`; //Changes transition delay (From ms -> s)
    overlay.style.background = `rgb(${redColor},0,0)`;
    redColor -= 50; //* Change this to make it less or more darker each delay
    //delay *= 0.9; //Added delay in case you want to pulse faster
    overlay.classList.toggle("shown");
  }, delay * 2);
}
/*
 *expamle test function that returns the input
 */
function exampleTest(num) {
  return num;
}
/**
 * @description Based on the input name and birthday, a horoscope reading will be outputted to the user
 * @tutorial horoscope-tutorial
 * @author Nikan, Bill, Jennifer
 */
function outputHoroscope() {
  //get birthday and name from local storage
  let customerBirthday = localStorage.getItem("Birthday");
  let customerName = localStorage.getItem("UserName");

  //set up birthdate in correct format and get numerical month
  //note: added time at noon, since date object would change
  //to EST if not specified and change the date by one
  birthday = new Date(`${customerBirthday}T12:00:00`);
  let birthdayMonth = birthday.getMonth();
  let birthdayDay = birthday.getDate();

  //the correct index corresponding to the horscope sign of the birthday
  let horoscopeSignIndex = adjustIndexForHorroscope(birthdayDay, birthdayMonth);
  console.log(horoscopeSignIndex);

  // get the current numereical day of the month for today
  let todayDate = new Date();
  let todayDay = todayDate.getDate();

  //randomize the responese of the horroscope by using the date of today to offset
  //the resopnse of the array
  let hashValue = (todayDay + horoscopeSignIndex) % 12;

  //get output elements from the horoscope.html file
  let horoscopeOutput = document.getElementById("horoscopeOutput");
  let nameOutput = document.getElementById("fname");
  let birthdayOutput = document.getElementById("birthday");
  let zodiacOutput = document.getElementById("zodiacSign");

  //display the output in the correct element
  nameOutput.innerHTML = customerName;
  birthdayOutput.innerHTML = customerBirthday;
  zodiacOutput.innerHTML = horoscopeArray[horoscopeSignIndex]["sign"];
  horoscopeOutput.innerHTML = `${horoscopeArray[hashValue]["horoscope"]}`;
}

/**
 * @description changes the location of the window to the home page
 * @tutorial horoscope-tutorial
 * @author Nikan, Bill, Jennifer
 */
function goHome() {
  window.location.href = "../../index.html";
}

/**
 * @description returns the index corresponding to the sign in the horoscope.JSON
 *                  file based on the input user birthday, using the hardcoded
 *                  date values.
 * @tutorial horoscope-tutorial
 * @param {int} day day of the user birthday
 * @param {int} month month of the user birthday
 * @returns index of the zodiac sign
 * @author Nikan
 */
function adjustIndexForHorroscope(day, month) {
  /*
    Aries (March 21 – April 19)
    Taurus (April 20 – May 20)
    Gemini (May 21 – June 20)
    Cancer (June 21 – July 22)
    Leo (July 23 – August 22)
    Virgo (August 23 – September 22)
    Libra (September 23 – October 22)
    Scorpio (October 23 – November 21)
    Sagittarius (November 22 – December 21)
    Capricorn (December 22 – January 19)
    Aquarius (January 20 – February 18)
    Pisces (February 19 – March 20)
    */

  let newIndex; //the index corresponding to the sign in the horoscope.JSON file

  //switch statement with the hardcoded values of the days.
  switch (month) {
    case 0: // January
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 19:
          newIndex = 0;
          break;
        case day >= 20 &amp;&amp; day &lt;= 31:
          newIndex = 1;
          break;
      }
      break;

    case 1: // February
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 18:
          newIndex = 1;
          break;
        case day >= 19 &amp;&amp; day &lt;= 28:
          newIndex = 2;
          break;
      }
      break;

    case 2: // March
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 20:
          newIndex = 2;
          break;
        case day >= 21 &amp;&amp; day &lt;= 31:
          newIndex = 3;
          break;
      }
      break;

    case 3: // April
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 19:
          newIndex = 3;
          break;
        case day >= 20 &amp;&amp; day &lt;= 30:
          newIndex = 4;
          break;
      }
      break;

    case 4: // May
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 20:
          newIndex = 4;
          break;
        case day >= 21 &amp;&amp; day &lt;= 31:
          newIndex = 5;
          break;
      }
      break;

    case 5: // June
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 20:
          newIndex = 5;
          break;
        case day >= 21 &amp;&amp; day &lt;= 30:
          newIndex = 6;
          break;
      }
      break;

    case 6: // July
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 22:
          newIndex = 6;
          break;
        case day >= 23 &amp;&amp; day &lt;= 31:
          newIndex = 7;
          break;
      }
      break;

    case 7: // August
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 22:
          newIndex = 7;
          break;
        case day >= 23 &amp;&amp; day &lt;= 31:
          newIndex = 8;
          break;
      }
      break;

    case 8: // September
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 22:
          newIndex = 8;
          break;
        case day >= 23 &amp;&amp; day &lt;= 30:
          newIndex = 9;
          break;
      }
      break;

    case 9: // October
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 22:
          newIndex = 9;
          break;
        case day >= 23 &amp;&amp; day &lt;= 31:
          newIndex = 10;
          break;
      }
      break;

    case 10: // November
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 21:
          newIndex = 10;
          break;
        case day >= 22 &amp;&amp; day &lt;= 30:
          newIndex = 11;
          break;
      }
      break;

    case 11: // December
      switch (true) {
        case day >= 1 &amp;&amp; day &lt;= 21:
          newIndex = 11;
          break;
        case day >= 22 &amp;&amp; day &lt;= 31:
          newIndex = 0;
          break;
      }
      break;

    default:
      newIndex = null;
      break;
  }
  return newIndex;
}
</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="44ExYb8hbDgSpUzDFTgri"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Horoscope.html">Horoscope</a></div><div class="sidebar-section-children"><a href="Horoscope.html">Horoscope</a></div><div class="sidebar-section-children"><a href="Questionaire.html">Questionaire</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="CZGolLka-tmj_snDuQnw-"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#adjustIndexForHorroscope">adjustIndexForHorroscope</a></div><div class="sidebar-section-children"><a href="global.html#concentricGradient">concentricGradient</a></div><div class="sidebar-section-children"><a href="global.html#goHome">goHome</a></div><div class="sidebar-section-children"><a href="global.html#initNameBirth">initNameBirth</a></div><div class="sidebar-section-children"><a href="global.html#outputHoroscope">outputHoroscope</a></div><div class="sidebar-section-children"><a href="global.html#parseNumbers">parseNumbers</a></div><div class="sidebar-section-children"><a href="global.html#pulseRedOverlay">pulseRedOverlay</a></div><div class="sidebar-section-children"><a href="global.html#shake">shake</a></div><div class="sidebar-section-children"><a href="global.html#showContent">showContent</a></div><div class="sidebar-section-children"><a href="global.html#timer">timer</a></div><div class="sidebar-section-children"><a href="global.html#TransitionCanvas">TransitionCanvas</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>